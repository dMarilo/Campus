<div class="login-container">
  <div class="login-background">
    <!-- Animated background shapes -->
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>

  <div class="container">
    <div class="row min-vh-100 align-items-center justify-content-center">
      <div class="col-lg-5 col-md-7 col-sm-9">
        <div class="login-card">
          <!-- Logo Section -->
          <div class="text-center mb-4">
            <div class="logo-wrapper mb-3">
              <i class="fa fa-university fa-3x text-primary"></i>
            </div>
            <h1 class="fw-bold mb-2">Welcome Back</h1>
            <p class="text-muted">Sign in to access Campus System</p>
          </div>

          <!-- Form -->
          <form [formGroup]="formGroup" (ngSubmit)="authenticate()">

            <!-- Error Alert -->
            @if (errorMessage && !isLoading) {
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fa fa-exclamation-circle me-2"></i>
                {{ errorMessage }}
                <button type="button" class="btn-close" (click)="errorMessage = null"></button>
              </div>
            }

            <!-- Email Field -->
            <div class="form-floating mb-3">
              <input
                type="email"
                id="email"
                class="form-control"
                placeholder="name@example.com"
                formControlName="email"
                [class.is-invalid]="formGroup.controls.email.invalid && formGroup.controls.email.touched"
              />
              <label for="email">
                <i class="fa fa-envelope me-2"></i>Email Address
              </label>

              @if (formGroup.controls.email.hasError('required') && formGroup.controls.email.touched) {
                <div class="invalid-feedback">
                  Email is required
                </div>
              }

              @if (formGroup.controls.email.hasError('email') && formGroup.controls.email.touched) {
                <div class="invalid-feedback">
                  Please enter a valid email address
                </div>
              }
            </div>

            <!-- Password Field -->
            <div class="form-floating mb-3">
              <input
                [type]="showPassword ? 'text' : 'password'"
                id="password"
                class="form-control"
                placeholder="Password"
                formControlName="password"
                [class.is-invalid]="formGroup.controls.password.invalid && formGroup.controls.password.touched"
              />
              <label for="password">
                <i class="fa fa-lock me-2"></i>Password
              </label>

              <button
                type="button"
                class="password-toggle"
                (click)="showPassword = !showPassword"
                tabindex="-1"
              >
                <i class="fa" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
              </button>

              @if (formGroup.controls.password.hasError('required') && formGroup.controls.password.touched) {
                <div class="invalid-feedback">
                  Password is required
                </div>
              }
            </div>

            <!-- Remember Me & Forgot Password -->
            <div class="d-flex justify-content-between align-items-center mb-4">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="rememberMe">
                <label class="form-check-label" for="rememberMe">
                  Remember me
                </label>
              </div>
              <a routerLink="/forgot-password" class="text-decoration-none">
                Forgot password?
              </a>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              class="btn btn-primary w-100 py-3 mb-3"
              [disabled]="formGroup.invalid || isLoading"
            >
              @if (isLoading) {
                <span class="spinner-border spinner-border-sm me-2"></span>
                Signing in...
              } @else {
                <i class="fa fa-sign-in-alt me-2"></i>
                Sign In
              }
            </button>
          </form>
        </div>

        <!-- Footer -->
        <div class="text-center mt-4">
          <p class="text-muted small mb-0">
            Â© 2026 Campus System. All rights reserved.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
